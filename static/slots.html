<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω Slots - IoT</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="dark-theme">
    <div class="dashboard-container">
        <nav class="sidebar">
            <div class="sidebar-logo"><h2>üè† IoT</h2></div>
            <ul class="sidebar-menu">
                <li><a href="dashboard.html"><span class="icon">üìä</span><span>Dashboard</span></a></li>
                <li><a href="slots.html" class="active"><span class="icon">üì±</span><span>Qu·∫£n l√Ω Slots</span></a></li>
                <li><a href="admin.html"><span class="icon">üëë</span><span>Admin</span></a></li>
                <li><a href="settings.html"><span class="icon">‚öôÔ∏è</span><span>C√†i ƒë·∫∑t</span></a></li>
            </ul>
        </nav>
        <main class="main-content">
            <header class="header">
                <h1>üì± Qu·∫£n l√Ω Slots</h1>
                <div class="header-right">
                    <button class="btn btn-primary" onclick="showAddForm()">+ Th√™m Slot</button>
                    <button class="btn-logout" onclick="logout()">ƒêƒÉng xu·∫•t</button>
                </div>
            </header>
            <div id="error-message" class="error-message"></div>
            <div id="success-message" class="success-message"></div>
            <div class="table-container">
                <table>
                    <thead><tr><th>Slot</th><th>T√™n</th><th>Lo·∫°i</th><th>ƒê∆°n v·ªã</th><th>C·∫£nh b√°o</th><th>V·ªã tr√≠</th><th>H√†nh ƒë·ªông</th></tr></thead>
                    <tbody id="slots-tbody"><tr><td colspan="7" class="text-center">ƒêang t·∫£i...</td></tr></tbody>
                </table>
            </div>
            <div class="settings-section mt-20">
                <h3>üìñ C√°c lo·∫°i Slot</h3>
                <p><span class="badge badge-value">VALUE</span> - Gi√° tr·ªã s·ªë (nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m...)</p>
                <p><span class="badge badge-status">STATUS</span> - Tr·∫°ng th√°i ON/OFF</p>
                <p><span class="badge badge-control">CONTROL</span> - ƒêi·ªÅu khi·ªÉn ON/OFF</p>
                <p><span class="badge badge-camera">CAMERA</span> - Camera stream</p>
                <p><span class="badge badge-chart">CHART</span> - Bi·ªÉu ƒë·ªì theo th·ªùi gian</p>
            </div>
        </main>
    </div>
    <div class="modal" id="slot-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="form-title">Th√™m Slot</h2>
                <button class="modal-close" onclick="hideModal()">&times;</button>
            </div>
            <form onsubmit="submitSlotForm(event)" id="slot-form">
                <div class="form-group"><label>S·ªë Slot</label><select id="slot-number" required></select></div>
                <div class="form-group"><label>T√™n</label><input type="text" id="slot-name" placeholder="VD: Nhi·ªát ƒë·ªô ph√≤ng" required></div>
                <div class="form-group"><label>Lo·∫°i</label>
                    <select id="slot-type" onchange="onTypeChange()">
                        <option value="value">üìä Gi√° tr·ªã s·ªë</option>
                        <option value="status">üîî Tr·∫°ng th√°i</option>
                        <option value="control">üí° ƒêi·ªÅu khi·ªÉn</option>
                        <option value="camera">üì∑ Camera</option>
                        <option value="chart">üìà Bi·ªÉu ƒë·ªì</option>
                    </select>
                </div>
                <div class="form-group"><label>Icon</label><input type="text" id="slot-icon" placeholder="üå°Ô∏è"></div>
                <div class="form-group" id="unit-group"><label>ƒê∆°n v·ªã</label><input type="text" id="slot-unit" placeholder="¬∞C, %, lux..."></div>
                <div class="form-group"><label>V·ªã tr√≠</label><input type="text" id="slot-location" placeholder="Ph√≤ng kh√°ch"></div>
                <div class="form-group" id="stream-group" style="display:none"><label>Stream URL</label><input type="text" id="slot-stream-url" placeholder="http://192.168.1.x/stream"></div>
                
                <!-- Alert Settings -->
                <div id="alert-group" class="alert-settings">
                    <h4>‚ö†Ô∏è C√†i ƒë·∫∑t c·∫£nh b√°o</h4>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-enabled" onchange="onAlertToggle()">
                            <span>B·∫≠t c·∫£nh b√°o</span>
                        </label>
                    </div>
                    <div id="alert-thresholds" style="display:none">
                        <div class="form-row">
                            <div class="form-group">
                                <label>üîµ Ng∆∞·ª°ng th·∫•p</label>
                                <input type="number" step="any" id="alert-min" placeholder="VD: 10">
                                <small>C·∫£nh b√°o khi gi√° tr·ªã < ng∆∞·ª°ng n√†y</small>
                            </div>
                            <div class="form-group">
                                <label>üî¥ Ng∆∞·ª°ng cao</label>
                                <input type="number" step="any" id="alert-max" placeholder="VD: 40">
                                <small>C·∫£nh b√°o khi gi√° tr·ªã > ng∆∞·ª°ng n√†y</small>
                            </div>
                        </div>
                        <p class="alert-note">üìß Email s·∫Ω ƒë∆∞·ª£c g·ª≠i ƒë·∫øn t·∫•t c·∫£ Admin khi v∆∞·ª£t ng∆∞·ª°ng</p>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="hideModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/slots.js"></script>
</body>
</html>
